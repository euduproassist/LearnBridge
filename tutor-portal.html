<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutor Portal ‚Äî LearnBridge</title>
  <link rel="icon" type="image/png" href="assets/logos/uj.png" />
  <style>
    /* --- General Reset and Body --- */
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: "Inter","Segoe UI",sans-serif; }
    body {
      background: linear-gradient(135deg, #ff7a00 0%, #000 100%);
      display: flex;
      min-height: 100vh;
    }
    
    /* --- Wrapper and Layout --- */
    .portal-wrapper { display: flex; width: 100%; min-height: 100vh; }
    
    /* --- Sidebar Styles --- */
    .portal-sidebar {
      width: 250px;
      background: rgba(0,0,0,0.75);
      backdrop-filter: blur(14px);
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: 4px 0 20px rgba(0,0,0,0.4);
    }
    .portal-sidebar img { width: 70px; margin-bottom: 10px; }
    .sidebar-header { text-align: center; color: #ff7a00; font-size: 20px; font-weight: bold; }
    .sidebar-menu ul { list-style: none; margin-top: 30px; padding: 0; }
    .sidebar-menu li {
      padding: 12px;
      background: rgba(255,255,255,0.03);
      border-radius: 6px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: 0.18s;
      display:flex; justify-content:space-between; align-items:center;
    }
    .sidebar-menu li.active, .sidebar-menu li:hover { background: rgba(255,122,0,0.95); color: #fff; }
    .sidebar-footer { font-size: 12px; color: #ff7a00; opacity: 0.9; text-align: center; margin-top: 20px; }
    
    /* --- Main Content Area --- */
    .portal-main { flex-grow: 1; background: rgba(255,255,255,0.94); padding: 30px; overflow-y: auto; }
    .main-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; background: rgba(0,0,0,0.06); padding: 15px 20px; border-radius: 12px; }
    .main-header h1 { color: #ff7a00; font-size: 26px; }
    .user-info { font-size: 14px; font-weight: bold; }
    
    /* --- Typography and Layout Helpers --- */
    h2 { color: #ff7a00; margin-bottom: 15px; }
    .dashboard-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; }
    .dash-card { padding: 20px; background: white; border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.15); cursor: pointer; transition: 0.2s; }
    .dash-card:hover { transform: scale(1.03); box-shadow: 0 8px 30px rgba(0,0,0,0.25); }
    input, textarea { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; margin-bottom: 12px; }
    button.btn { background: #ff7a00; color: white; padding: 10px 14px; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; transition: background-color 0.2s; }
    button.btn:hover { background: #e06c00; }
    button.btn.secondary { background: #ddd; color: #333; }
    .hidden { display: none; }
    .search-row { display:flex; gap:8px; margin-bottom:12px; align-items:center; }
    .profiles-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap:14px; }
    .profile-card { background:#fff; border-radius:10px; padding:15px; box-shadow: 0 6px 18px rgba(0,0,0,0.06); }
    .profile-photo { width:72px; height:72px; border-radius:8px; object-fit:cover; background:#f0f0f0; }
    .avail-dot { width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:8px; }
    .avail-green { background:#28a745; }
    .avail-red { background:#d73a3a; }
    .muted { color:#666; font-size:13px; }
    
    /* --- Table Styles --- */
    table { width:100%; border-collapse: collapse; margin-top: 15px; }
    th,td { padding:12px 8px; border-bottom: 1px solid #eee; text-align:left; }
    th { background: #f5f5f5; font-weight: 600; color: #333; }
    .empty { text-align:center; padding:18px; border:2px dashed #eee; border-radius:10px; color:#666; }
    
    /* --- Badge Styles (for session status/role) --- */
    .badge { padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; margin-left: 5px; }
    .badge-upcoming { background: #007bff; color: white; }
    .badge-today { background: #ffc107; color: #333; }
    .badge-pending { background: #ff7a00; color: white; }
    .badge-approved { background: #28a745; color: white; }
    .badge-rejected { background: #d73a3a; color: white; }
    .badge-completed { background: #6c757d; color: white; }
    
    /* --- Chat specific styles (copied from student portal) --- */
    .chat-container { display: flex; height: 60vh; background: #f9f9f9; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .chat-list { width: 200px; border-right: 1px solid #eee; padding: 10px; overflow-y: auto; background: #fff; }
    .chat-item { padding: 10px; border-bottom: 1px solid #f0f0f0; cursor: pointer; }
    .chat-item.active { background: #ffe6cc; font-weight: bold; }
    .chat-window { flex-grow: 1; display: flex; flex-direction: column; }
    .chat-header { padding: 10px; background: #ff7a00; color: white; border-top-right-radius: 12px; font-weight: bold; }
    .messages { flex-grow: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
    .message { max-width: 80%; padding: 8px 12px; border-radius: 18px; line-height: 1.4; }
    .message.sent { background: #ff7a00; color: white; align-self: flex-end; }
    .message.received { background: #ddd; color: #333; align-self: flex-start; }
    .chat-input { display: flex; padding: 10px; border-top: 1px solid #eee; }
    .chat-input input { flex-grow: 1; margin-bottom: 0; margin-right: 10px; }
    .chat-actions { display: flex; gap: 5px; align-items: center; }

    /* --- Availability Grid Styles (New) --- */
    .availability-grid {
      display: grid;
      grid-template-columns: repeat(8, 1fr); /* Time + 7 days */
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
      margin-top: 15px;
    }
    .grid-header, .grid-cell {
      padding: 10px;
      border-right: 1px solid #eee;
      border-bottom: 1px solid #eee;
      text-align: center;
      font-size: 14px;
    }
    .grid-header {
      background: #ff7a00;
      color: white;
      font-weight: bold;
    }
    .grid-cell {
      background: #fff;
      cursor: pointer;
      transition: background-color 0.1s;
    }
    .grid-cell:hover { background: #ffe6cc; }
    .grid-cell.available { background: #d4edda; }
    
    /* --- Responsive Adjustments (copied from student portal) --- */
    @media(max-width:800px){ .portal-sidebar { width:200px } }
  </style>
</head>
<body>
<div class="portal-wrapper">

  <aside class="portal-sidebar">
    <div>
      <div class="sidebar-header">
        <img src="assets/logos/uj.png" alt="UJ Logo">
        <div>LearnBridge</div>
      </div>

      <nav class="sidebar-menu">
        <ul>
          <li id="menuDashboard" class="active">üè† Dashboard</li>
          <li id="menuIncoming">üì© Incoming Requests <span id="requestsBadge" style="display:none;background:#ff7a00;color:#fff;padding:2px 6px;border-radius:10px;font-size:12px;margin-left:8px">0</span></li>
          <li id="menuSessions">üìÖ Upcoming Sessions</li>
          <li id="menuAvailability">‚è∞ Manage Availability</li>
          <li id="menuChat">üí¨ Chat</li>
          <li id="menuNotifications">üîî Notifications <span id="notifBadge" style="display:none;background:#d73a3a;color:#fff;padding:2px 6px;border-radius:10px;font-size:12px;margin-left:8px">0</span></li>
          <li id="menuRatings">‚≠ê Ratings & Feedback</li>
          <li id="menuSupport">üÜò Report an Issue</li>
          <li id="menuProfile">üë§ My Profile</li>
        </ul>
      </nav>
    </div>

    <div class="sidebar-footer">
      Tutor/Counsellor ‚Ä¢ University of Johannesburg<br>
      <small class="muted">Status: Logged in</small>
    </div>
  </aside>

  <main class="portal-main">
    <header class="main-header">
      <h1>Tutor/Counselor Portal</h1>
      <div class="user-info">
        <span id="tutorRole">Tutor</span> ‚Ä¢ <span id="currentTime"></span>
      </div>
    </header>

    <section id="dashboardSection">
      <h2>Dashboard</h2>

      <div class="dashboard-cards">
        <div class="dash-card" id="openRequests">
          <h3>üì• Pending Requests</h3>
          <p id="pendingSummary">You have <strong id="pendingCount">0</strong> new request(s).</p>
          <div style="margin-top:12px"><button class="btn" id="gotoRequests">Review Requests</button></div>
        </div>

        <div class="dash-card" id="openSessions">
          <h3>üìÖ Upcoming Sessions</h3>
          <p id="sessionSummary">Total this week: <strong id="sessionsCount">0</strong></p>
          <div style="margin-top:12px"><button class="btn" id="gotoSessions">View Full Schedule</button></div>
        </div>

        <div class="dash-card" id="openAvailability">
          <h3>‚è∞ Availability</h3>
          <p id="availabilitySummary">Status: <span class="avail-dot avail-green"></span>**Available Now**</p>
          <div style="margin-top:12px"><button class="btn" id="gotoAvailability">Update Availability</button></div>
        </div>

        <div class="dash-card" id="openRatings">
        <h3>‚≠ê Average Rating</h3>
        <p id="ratingsSummary">Overall: <strong id="averageRating">N/A</strong> / 5.0 (0 reviews)</p>
        <div style="margin-top:12px"><button class="btn" id="gotoRatings">View Feedback</button></div>
        </div>
      </div>

      <h3 style="margin-top:30px; color:#333;">Today's Schedule</h3>
      <div id="todayScheduleList" style="margin-top:10px;">
        <div class="empty">You have no sessions scheduled for today.</div>
      </div>
    </section>
    
    <section id="incomingSection" class="hidden">
      <h2>üì© Incoming Requests (Pending)</h2>
      <div id="incomingList">
        <div class="empty">No pending booking requests at this time.</div>
        
        <div class="profile-card" style="margin-bottom: 15px; border-left: 4px solid #ff7a00;">
            <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                <div>
                    <strong style="font-size:16px;">Student: Jane Doe</strong> <span class="badge badge-pending">Pending</span><br>
                    <span class="muted">Module: **A-MAT1503**</span><br>
                    <span class="muted">Date/Time: **2025-12-10 @ 14:00 - 15:00**</span><br>
                    <span class="muted">Mode: **Online**</span>
                </div>
                <img src="assets/images/student-jane.jpg" alt="Student Photo" class="profile-photo">
            </div>
            <p style="margin-top:8px; font-style: italic;">"Need urgent help with integration by parts before the test."</p>
            <div style="margin-top:10px; display:flex; gap:10px;">
                <button class="btn">Approve</button>
                <button class="btn secondary">Reject</button>
                <button class="btn secondary">Suggest New Time</button>
                <button class="btn secondary">Chat Before Accepting</button>
            </div>
        </div>
        </div>
    </section>

    <section id="sessionsSection" class="hidden">
      <h2>üìÖ Upcoming Sessions (Approved Bookings)</h2>
      
      <table>
        <thead>
          <tr>
            <th>Date & Time</th>
            <th>Student</th>
            <th>Module</th>
            <th>Mode</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="upcomingSessionTableBody">
          <tr>
            <td>2025-12-09 @ 10:00</td>
            <td>John Smith</td>
            <td>A-PRG1500</td>
            <td>Online</td>
            <td><span class="badge badge-today">Today</span></td>
            <td>
              <button class="btn" style="padding: 6px 10px;">Start Session</button>
            </td>
          </tr>
          <tr>
            <td>2025-12-12 @ 11:30</td>
            <td>Sarah Lee</td>
            <td>B-ACC2001</td>
            <td>In-Person</td>
            <td><span class="badge badge-upcoming">Upcoming</span></td>
            <td>
              <button class="btn secondary" style="padding: 6px 10px;">Mark Complete</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div id="sessionEmpty" class="empty hidden">No upcoming approved sessions.</div>
    </section>

    <section id="availabilitySection" class="hidden">
      <h2>‚è∞ Manage Availability</h2>

      <div style="display:flex; gap:10px; margin-bottom:15px;">
        <button class="btn">Toggle **Available Now** (Online Status)</button>
        <button class="btn secondary">Go **Offline Mode**</button>
      </div>

      <div style="margin-bottom:15px;">
        <label>Location for In-Person Sessions:</label>
        <input type="text" id="inPersonLocation" placeholder="e.g., APK Campus, D-Ring, Room 305" style="margin-bottom:0;">
      </div>

      <h3 style="color:#333; margin-top:20px;">Weekly Time Slots</h3>
      
      <div class="availability-grid">
        <div class="grid-header">Time</div>
        <div class="grid-header">Mon</div>
        <div class="grid-header">Tue</div>
        <div class="grid-header">Wed</div>
        <div class="grid-header">Thu</div>
        <div class="grid-header">Fri</div>
        <div class="grid-header">Sat</div>
        <div class="grid-header">Sun</div>
        
        <div class="grid-header" style="background:#f9f9f9; color:#333;">09:00 - 10:00</div>
        <div class="grid-cell available">‚úîÔ∏è</div>
        <div class="grid-cell available">‚úîÔ∏è</div>
        <div class="grid-cell"></div>
        <div class="grid-cell available">‚úîÔ∏è</div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>
        
        <div class="grid-header" style="background:#f9f9f9; color:#333;">14:00 - 16:00</div>
        <div class="grid-cell"></div>
        <div class="grid-cell available">‚úîÔ∏è</div>
        <div class="grid-cell available">‚úîÔ∏è</div>
        <div class="grid-cell"></div>
        <div class="grid-cell available">‚úîÔ∏è</div>
        <div class="grid-cell"></div>
        <div class="grid-cell"></div>

      </div>
      <small class="muted" style="display:block; margin-top:10px;">Click a cell to toggle availability. Green cells are available slots.</small>
      
      <div style="margin-top:20px; display:flex; gap:10px;">
        <button class="btn">Add New Slot</button>
        <button class="btn secondary">Save Availability</button>
      </div>
    </section>


    <section id="chatSection" class="hidden">
      <h2>Chat üí¨</h2>
      <div class="chat-container">
        <div class="chat-list" id="chatList">
          <div class="empty">Loading contacts...</div>
        </div>
        <div class="chat-window">
          <div class="chat-header" id="chatHeader">Select a student contact to start chatting</div>
          <div class="messages" id="chatMessages">
             <div class="empty" style="border:none">No messages yet. Say hello!</div>
          </div>
          <div class="chat-input">
             <input id="messageInput" type="text" placeholder="Type your message..." disabled>
             <div class="chat-actions">
                <button class="btn secondary" id="toolUploadBtn" disabled title="Send Learning Materials/Tools">üìö</button>
                <button class="btn secondary" id="fileUploadBtn" disabled title="Upload File/Link">üìé</button>
                <button class="btn" id="sendMessageBtn" disabled>Send</button>
             </div>
          </div>
        </div>
      </div>
    </section>
    
    <section id="notificationsSection" class="hidden">
      <h2>üîî Notifications Center</h2>
      
      <div style="display:flex; justify-content:space-between; margin-bottom:15px; border-bottom:1px solid #eee; padding-bottom:10px;">
        <h3 style="color:#333; margin:0;">Alerts</h3>
        <button class="btn secondary" style="padding: 6px 10px;">Mark All As Read</button>
      </div>

      <div id="notificationsList" style="background:#fff; padding:15px; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.05);">
        <p style="border-bottom: 1px solid #f0f0f0; padding: 8px 0;"><strong>New Request:</strong> Student Jane Doe for A-MAT1503 on Dec 10 @ 14:00.</p>
        <p style="border-bottom: 1px solid #f0f0f0; padding: 8px 0;"><strong>Session Alert:</strong> Your session with John Smith is starting in 30 minutes.</p>
        <p style="padding: 8px 0;"><strong>Chat:</strong> You have 2 unread messages from Sarah Lee.</p>
      </div>

      <h3 style="color:#333; margin-top:30px;">Preferences</h3>
      <div style="margin-top:10px; padding:15px; background:#fff; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.05);">
          <p><input type="checkbox" id="smsNotif"> **SMS Notifications** (On/Off)</p>
          <p><input type="checkbox" id="emailNotif"> **Email Notifications** (On/Off)</p>
          <p><input type="checkbox" id="inAppOnly"> **In-App Only Mode**</p>
      </div>

    </section>
    
    <section id="ratingsSection" class="hidden">
      <h2>‚≠ê Ratings & Feedback</h2>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; background:#f0f0f0; padding:15px; border-radius:8px;">
        <h3 style="color:#ff7a00; margin:0;">Overall Rating: 4.8 / 5.0 (24 reviews)</h3>
        <select id="ratingFilter" style="width: 150px; margin:0;">
          <option value="">Filter by Star</option>
          <option value="5">5 Star</option>
          <option value="4">4 Star</option>
          <option value="3">3 Star</option>
          <option value="1">1 Star</option>
        </select>
      </div>
      
      <div id="feedbackList">
        <div class="profile-card" style="margin-bottom: 15px;">
            <p><strong>Student:</strong> Mark Z. | <strong>Rating:</strong> ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</p>
            <p class="muted">Session: A-PRG1500 on 2025-11-20</p>
            <p style="margin-top:8px;">"Excellent explanation of recursion. The practice test materials were extremely helpful!"</p>
            <div style="margin-top:10px;">
                <button class="btn secondary" style="padding: 6px 10px;">Respond to Feedback</button>
            </div>
        </div>
        <div class="empty hidden">No feedback has been submitted yet.</div>
      </div>
    </section>

    <section id="supportSection" class="hidden">
      <h2>üÜò Report an Issue</h2>
      <label>Title:</label>
      <input id="supportTitle" type="text" placeholder="Short summary of the issue">
      
      <label>Category:</label>
      <select id="supportCategory">
        <option value="technical">Technical</option>
        <option value="student">Student Behavior</option>
        <option value="scheduling">Scheduling/Booking</option>
        <option value="other">Other</option>
      </select>
      
      <label>Priority:</label>
      <select id="supportPriority">
          <option value="normal">Normal</option>
          <option value="urgent">Urgent</option>
      </select>
      
      <label>Full Description:</label>
      <textarea id="supportMessage" rows="5" placeholder="Explain your issue in detail..."></textarea>
      
      <button id="sendSupportBtn" class="btn">Send Report to Admin</button>
    </section>

    <section id="profileSection" class="hidden">
      <h2>üë§ My Profile</h2>

      <div class="profile-card">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <div>
                <p><strong>Email:</strong> <span id="profileEmail">tutor-uj@uj.ac.za</span> (Non-editable)</p>
                <p><strong>Role:</strong> Tutor | **Account Status:** <span class="badge badge-approved">Approved</span></p>
            </div>
            <img id="profilePhoto" src="assets/images/placeholder-tutor.jpg" alt="Profile Photo" class="profile-photo" style="width: 100px; height: 100px;">
        </div>
        
        <label>Full Name:</label>
        <input id="profileNameInput" type="text" value="Dr. Themba Ngcobo">

        <label>Bio ("About Me"):</label>
        <textarea id="profileBioInput" rows="3" placeholder="Write a short bio..."></textarea>
        
        <label>Modules/Subjects Taught (Comma Separated):</label>
        <input id="profileModulesInput" type="text" value="A-MAT1503, A-PRG1500, B-ACC2001">

        <label>Department:</label>
        <input id="profileDepartmentInput" type="text" value="Computer Science">

        <label>Qualifications:</label>
        <input id="profileQualificationsInput" type="text" value="PhD (Comp Sci), BSc Hons">

        <label>Location (City + Campus):</label>
        <input id="profileLocationInput" type="text" value="Johannesburg, APK Campus">
        
        <label>Profile Picture URL:</label>
        <input id="profilePictureInput" type="text" placeholder="URL of your profile picture">

        <h4 style="margin-top:20px; color:#ff7a00;">Optional: Social Links</h4>
        <label>LinkedIn URL:</label>
        <input id="profileLinkedInInput" type="text">

        <button id="saveProfileBtn" class="btn">Save Profile</button>
      </div>
    </section>

    <div id="forgotPasswordNote" class="hidden">
      <p>The Forgot Password feature is handled on the login screen, following an OTP-based email workflow.</p>
    </div>
    
  </main>
</div>

<script>
  // Script to update the current time (copied from student portal)
  setInterval(() => {
    document.getElementById("currentTime").textContent = new Date().toLocaleString();
  }, 1000);

  // Script to handle navigation (Basic simulation)
  const sections = document.querySelectorAll('section');
  const menuItems = document.querySelectorAll('.sidebar-menu li');

  function showSection(id) {
    sections.forEach(sec => sec.classList.add('hidden'));
    document.getElementById(id + 'Section').classList.remove('hidden');
    menuItems.forEach(item => item.classList.remove('active'));
    document.getElementById('menu' + id).classList.add('active');
  }

  menuItems.forEach(item => {
    item.addEventListener('click', (e) => {
      const id = e.currentTarget.id.replace('menu', '');
      showSection(id);
    });
  });

  // Handle quick actions from dashboard
  document.getElementById('gotoRequests').addEventListener('click', () => showSection('Incoming'));
  document.getElementById('gotoSessions').addEventListener('click', () => showSection('Sessions'));
  document.getElementById('gotoAvailability').addEventListener('click', () => showSection('Availability'));
  document.getElementById('gotoRatings').addEventListener('click', () => showSection('Ratings'));

  // Initial load
  document.addEventListener('DOMContentLoaded', () => {
    // Determine the role for display (Tutor/Counsellor - this would be dynamic in real app)
    // For now, default to Tutor
    document.getElementById('tutorRole').textContent = 'Tutor'; 
    showSection('Dashboard');
  });
</script>

</body>
</html>




