<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Portal ‚Äî LearnBridge</title>
  <link rel="icon" type="image/png" href="assets/logos/uj.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
  <style>
    /* * LearnBridge Student Portal Styles
     * Theme: Dark/Orange Accent (UJ Inspired)
     * Accent Color: #ff7a00 (LearnBridge Orange)
     * ADAPTED FROM ADMIN PORTAL STYLES
     */
    
    /* Global Reset & Typography */
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
      font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
    }
    
    body {
      /* Matching Admin BG for sidebar context */
      background: linear-gradient(135deg, #000 0%, #333 100%); 
      display: flex;
      min-height: 100vh;
      color: #333; /* Default text color for main content */
    }
    
    /* --- Layout Structure --- */
    .portal-wrapper { 
      display: flex; 
      width: 100%; 
      min-height: 100vh; 
    }
    
    /* Sidebar */
    .portal-sidebar {
      width: 250px;
      min-width: 200px;
      background: rgba(0,0,0,0.9); /* Darker/More opaque */
      backdrop-filter: blur(10px);
      color: white;
      padding: 20px 15px; 
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: 4px 0 20px rgba(0,0,0,0.7);
      z-index: 10;
    }
    
    .portal-sidebar img { 
      width: 70px; 
      margin-bottom: 10px; 
    }
    
    .sidebar-header { 
      text-align: center; 
      color: #ff7a00; 
      font-size: 22px; 
      font-weight: 800;
      margin-bottom: 20px;
    }
    
    /* Sidebar Menu */
    .sidebar-menu ul { 
      list-style: none; 
      padding: 0; 
      margin-top: 20px;
    }
    
    .sidebar-menu li {
      padding: 12px;
      background: rgba(255,255,255,0.05); /* Lighter background for items */
      border-radius: 8px; 
      margin-bottom: 8px;
      cursor: pointer;
      transition: background 0.18s, color 0.18s, box-shadow 0.18s;
      display:flex; 
      justify-content:space-between; 
      align-items:center;
      font-weight: 500;
    }
    
    .sidebar-menu li.active, .sidebar-menu li:hover { 
      background: #ff7a00; 
      color: #fff; 
      box-shadow: 0 0 10px rgba(255, 122, 0, 0.5); /* Subtle glow on hover/active */
    }
    
    .sidebar-footer { 
      font-size: 11px; 
      color: #ff7a00; 
      opacity: 0.9; 
      text-align: center; 
      padding-top: 15px;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    /* Main Content Area */
    .portal-main { 
      flex-grow: 1; 
      background: #f4f4f4; /* Lighter main BG for contrast */
      padding: 30px; 
      overflow-y: auto; 
    } 
    
    /* Main Header */
    .main-header { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 25px; 
      background: white; 
      padding: 18px 25px; 
      border-radius: 12px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.08); 
    }
    
    .main-header h1 { 
      color: #cc6600; 
      font-size: 28px; 
      font-weight: 700;
    } 
    
    .user-info { 
      font-size: 15px; 
      font-weight: 600; 
      color: #444; 
    }
    
    h2 { 
      color: #ff7a00; 
      margin-bottom: 15px; 
      border-bottom: 2px solid #ff7a00; 
      padding-bottom: 5px; 
      font-size: 24px;
      font-weight: 700;
    }
    
    h3 {
      color: #555;
      margin-bottom: 10px;
      font-size: 20px;
    }

    /* --- Form Elements & Buttons --- */
    input, textarea, select { 
      width: 100%; 
      padding: 12px; 
      border-radius: 8px; 
      border: 1px solid #ddd; 
      margin-bottom: 15px; 
      transition: border-color 0.15s;
    }
    input:focus, select:focus, textarea:focus {
        border-color: #ff7a00;
        outline: none;
    }
    
    button.btn { 
      background: #ff7a00; 
      color: white; 
      padding: 12px 18px; 
      border: none; 
      border-radius: 8px; 
      cursor: pointer; 
      font-weight: 700; 
      transition: 0.2s; 
    }
    
    button.btn:hover { 
      background: #cc6600; 
      transform: translateY(-1px);
    }
    
    button.btn.secondary { 
      background: #eee; 
      color: #555; 
    }
    button.btn.secondary:hover { 
        background: #ccc;
        color: #333;
    }
    
    button.btn.danger { 
      background: #d73a3a; 
      color: white; 
    }
    button.btn.danger:hover { background: #b02e2e; }

    .hidden { display: none !important; }

    .search-row { 
      display:flex; 
      gap:15px; 
      margin-bottom:20px; 
      align-items:center; 
      padding: 15px; 
      background: #fff; 
      border-radius: 10px; 
      box-shadow: 0 1px 8px rgba(0,0,0,0.05); 
    }

    /* Dashboard Cards */
    .dashboard-cards { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); 
      gap: 20px; 
    }
    
    .dash-card { 
      padding: 25px; 
      background: white; 
      border-radius: 12px; 
      box-shadow: 0 4px 20px rgba(0,0,0,0.15); 
      border-left: 6px solid #ff7a00; /* Matching Admin card style */
      cursor: pointer; 
      transition: all 0.2s ease-in-out; 
    }
    
    .dash-card:hover { 
      transform: translateY(-5px); 
      box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
    }

    /* Profile Grid (used for search results) */
    .profiles-grid { 
      display:grid; 
      grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); 
      gap:20px; 
      margin-top: 15px;
    }
    
    .profile-card { 
      background:#fff; 
      border-radius:12px; 
      padding:20px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
      border-left: 4px solid #ff7a00; /* Consistent border accent */
    }
    
    .profile-photo { 
      width:72px; 
      height:72px; 
      border-radius:10px; /* Slightly rounder */
      object-fit:cover; 
      background:#f0f0f0; 
      margin-bottom: 10px;
    }
    
    .avail-dot { 
      width:10px;
      height:10px;
      border-radius:50%;
      display:inline-block;
      margin-right:8px; 
    }
    .avail-green { background:#28a745; }
    .avail-red { background:#d73a3a; }
    .muted { color:#888; font-size:14px; }

    /* Table Styling */
    table { 
      width:100%; 
      border-collapse: collapse; 
      background: white; 
      border-radius: 12px; 
      overflow: hidden; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
    }
    
    th, td { 
      padding:15px; 
      border-bottom: 1px solid #f0f0f0; 
      text-align:left; 
      vertical-align: middle;
      font-size: 14px;
    }
    
    th { 
      background: #e9e9e9; 
      color: #333; 
      font-weight: 700; 
      text-transform: uppercase;
    }
    
    tr:hover { 
      background: #fff5ee; 
    }
    
    .empty { 
      text-align:center; 
      padding:30px; 
      border:2px dashed #ccc; 
      border-radius:10px; 
      color:#666; 
      margin-top: 20px; 
      background: #fff;
    }
    
    /* modal */
    .modal-back { 
      position: fixed; 
      inset:0; 
      background: rgba(0,0,0,0.6); /* Darker backdrop */
      display:flex; 
      align-items:center; 
      justify-content:center; 
      z-index:9999; 
    }
    
    .modal { 
      background:white; 
      border-radius:12px; 
      padding:25px; 
      width: 480px; 
      max-width:95%; 
      box-shadow:0 10px 40px rgba(0,0,0,0.4); 
    }
    
    .modal h3 { 
      margin-bottom:15px; 
      color:#ff7a00; 
      border-bottom: 2px solid #ff7a00;
      padding-bottom: 5px;
    }
    
    .modal .row { 
      display:flex; 
      gap:10px; 
      margin-bottom: 10px;
    }

    /* Chat specific styles */
.chat-container { 
  display: flex; 
  height: 70vh; /* Increased height for better viewing */
  background: #fdfdfd; /* Very light background, almost white */
  border-radius: 12px; 
  box-shadow: 0 4px 15px rgba(0,0,0,0.05); /* Lighter shadow */
}

.chat-list { 
  width: 280px; /* Slightly wider list for better names */
  min-width: 250px;
  border-right: 1px solid #e0e0e0; /* Softer divider */
  padding: 10px 0; /* Padding adjustment */
  overflow-y: auto; 
  background: #f7f7f7; /* Very light grey for list background */
}

.chat-item { 
  padding: 15px 20px; /* Increased padding */
  border-bottom: none; /* Removed bottom border for cleaner look */
  cursor: pointer; 
  border-radius: 0; /* Full-width hover effect */
  transition: background 0.2s, color 0.2s;
  font-size: 14px;
  position: relative;
}

.chat-item:hover {
    background: #fff5ee; /* Very subtle light orange hover */
}

.chat-item.active { 
  background: #ff7a00; 
  color: white;
  font-weight: 600; 
  /* Add an accent line for extra visual pop */
  border-left: 4px solid #cc6600; 
  padding-left: 16px; 
}

.chat-window { 
  flex-grow: 1; 
  display: flex; 
  flex-direction: column; 
}

.chat-header { 
  padding: 15px 20px; 
  background: #333; /* Darker, less distracting header */
  color: white; 
  border-top-right-radius: 12px; 
  font-weight: 600; 
  font-size: 16px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.messages { 
  flex-grow: 1; 
  padding: 20px; 
  overflow-y: auto; 
  display: flex; 
  flex-direction: column; 
  gap: 10px; /* Reduced gap slightly */
  background: #fdfdfd; /* Light, calming message area */
}

.message { 
  max-width: 65%; /* Narrower bubble for better readability on wide screens */
  padding: 10px 15px; 
  border-radius: 18px; /* Slightly less round */
  line-height: 1.5; /* Increased line-height for better eye comfort */
  font-size: 15px;
  word-wrap: break-word; /* Essential for long words */
}

.message.sent { 
  background: #ff7a00; 
  color: white; 
  align-self: flex-end; 
  /* Modern bubble tail look */
  border-bottom-right-radius: 4px; 
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.message.received { 
  background: #e9e9e9; 
  color: #333; 
  align-self: flex-start; 
  /* Modern bubble tail look */
  border-bottom-left-radius: 4px; 
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
}

.chat-input { 
  display: flex; 
  padding: 15px 20px; 
  border-top: 1px solid #e0e0e0; /* Softer divider */
  background: #f7f7f7; /* Matching list background for an integrated look */
}

.chat-input input { 
  flex-grow: 1; 
  margin-bottom: 0; 
  margin-right: 10px; 
  background: white; /* White input field for focus */
  border: 1px solid #ddd;
}

.chat-actions { 
  display: flex; 
  gap: 5px; 
  align-items: center; 
}

     /* Responsive Adjustments */
    @media(max-width: 800px) { 
        .portal-sidebar { width: 200px; padding: 15px; } 
        .modal{ width: 92%; } 
        .main-header { flex-direction: column; align-items: flex-start; }
        .main-header h1 { margin-bottom: 10px; }
        .search-row { flex-wrap: wrap; }
        .search-row input, .search-row select { flex: 1 1 45%; }
    }
    
    @media(max-width: 600px){
        .portal-wrapper { flex-direction: column; }
        .portal-sidebar { width: 100%; height: auto; padding-bottom: 0; }
        .sidebar-menu ul { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 10px; }
        .sidebar-menu li { margin: 5px; flex-grow: 1; text-align: center; }
        .portal-main { padding: 15px; }
        .dashboard-cards { grid-template-columns: 1fr; }
        
        /* CONSOLIDATED CHAT STYLES */
        .chat-container { flex-direction: column; height: auto; }
        .chat-list { 
            width: 100%; 
            border-right: none; 
            border-bottom: 1px solid #e0e0e0; /* Updated from #eee to match new theme */
            padding: 10px; /* Added padding */
        }
        .chat-item { padding: 12px 15px; } /* Mobile padding for list items */
        .chat-item.active { padding-left: 12px; } /* Mobile padding for active item */
        .chat-input { flex-direction: column; gap: 10px; }
        .chat-input input { margin-right: 0; }
        .chat-actions { justify-content: flex-end; }
    }
   

  </style>
</head>
<body>
<div class="portal-wrapper">

  <aside class="portal-sidebar">
    <div>
      <div class="sidebar-header">
        <img src="assets/logos/uj.png" alt="UJ Logo">
        <div>LearnBridge</div>
      </div>

      <nav class="sidebar-menu">
        <ul>
          <li id="menuDashboard" class="active">üè† Dashboard</li>
          <li id="menuSessions">üìÖ Upcoming Sessions</li>
          <li id="menuBookTutor">üìò Request Tutor</li>
          <li id="menuBookCounsellor">üí¨ Request Counsellor</li>
          <li id="menuPending">üì® Pending Requests <span id="pendingBadge" style="display:none;background:#ff7a00;color:#fff;padding:2px 6px;border-radius:10px;font-size:12px;margin-left:8px">0</span></li>
          <li id="menuChat">üí¨ Chat</li>
          <li id="menuNotifications">üîî Notifications <span id="notifBadge" style="display:none;background:#d73a3a;color:#fff;padding:2px 6px;border-radius:10px;font-size:12px;margin-left:8px">0</span></li>
          <li id="menuRatings">‚≠ê Ratings & Feedback</li>
          <li id="menuSupport">üÜò Support</li>
          <li id="menuProfile">üë§ Profile</li>
          <li id="menuLogout" style="background:#cc6600; color:white; margin-top: 15px;">üö™ Log Out</li>
        </ul>
      </nav>
    </div>

    <div class="sidebar-footer">
      Student ‚Ä¢ University of Johannesburg<br>
      <small class="muted">Status: Logged in</small>
    </div>
  </aside>

  <main class="portal-main">
    <header class="main-header">
      <h1>Student Portal</h1>
      <div class="user-info">
        UJ ‚Ä¢ <span id="currentTime"></span>
      </div>
    </header>

    <section id="dashboardSection">
      <h2>Dashboard</h2>

      <div style="margin-bottom:20px; display:flex; gap:15px; align-items:center; padding: 15px; background: #fff; border-radius: 10px; box-shadow: 0 1px 8px rgba(0,0,0,0.05);">
        <div class="search-row" style="flex:1; margin-bottom: 0; padding: 0; background: none; box-shadow: none; gap: 8px;">
          <input id="quickSearch" placeholder="Quick search tutors/counsellors by name, module, department..." style="margin-bottom: 0;">
          <button class="btn secondary" id="quickSearchBtn" style="padding: 12px 14px;">Search</button>
        </div>
        
        <div style="width:250px; display:flex; flex-direction:row; gap:10px;">
        <button class="btn" id="bookTutorQuick" style="flex:1;">Book Tutor</button>
          <button class="btn" id="bookCounsellorQuick" style="flex:1;">Book Counsellor</button>
        </div>
      </div>

      <div class="dashboard-cards">
        <div class="dash-card" id="openProfile">
          <h3>Profile Summary</h3>
          <p><strong>Name:</strong> <span id="summaryName">‚Äî</span></p>
          <p><strong>Year:</strong> <span id="summaryYear">‚Äî</span></p>
          <p><strong>Department:</strong> <span id="summaryDepartment">‚Äî</span></p>
          <p><strong>Course:</strong> <span id="summaryCourse">‚Äî</span></p>
        </div>

        <div class="dash-card" id="openTutorSessions">
          <h3>Tutor Sessions</h3>
          <p id="tutorSessionSummary">No upcoming tutor sessions.</p>
          <div style="margin-top:12px"><button class="btn" id="gotoTutorList">View Tutors</button></div>
        </div>

        <div class="dash-card" id="openCounsellorSessions">
          <h3>Counsellor Sessions</h3>
          <p id="counsellorSessionSummary">No upcoming counsellor sessions.</p>
          <div style="margin-top:12px"><button class="btn" id="gotoCounsellorList">View Counsellors</button></div>
        </div>

        <div class="dash-card" id="openPendingRequests">
        <h3>Pending Requests</h3>
        <p id="pendingSummary">You have <strong id="pendingCount">0</strong> pending request(s).</p>
        <div style="margin-top:12px"><button class="btn" id="gotoPending">View Pending Requests</button></div>
        </div>

       <div class="dash-card" id="openRatings">
       <h3>Ratings & Feedback</h3>
       <p>You have submitted <strong id="ratingsCount">0</strong> rating(s).</p>
       <div style="margin-top:12px"><button class="btn" id="gotoRatings">View Ratings</button></div>
       </div>


      </div>
    </section>

    <section id="searchSection" class="hidden">
      <h2 id="searchTitle">Search</h2>

      <div class="search-row">
          <input id="searchInput" placeholder="Name, module, department, location..." style="flex:1">
          <select id="filterRole">
            <option value="">All</option>
            <option value="tutor">Tutor</option>
            <option value="counsellor">Counsellor</option>
          </select>
          <button class="btn" id="searchBtn">Search</button>
          <button class="btn secondary" id="searchBackBtn">Back</button>
        </div>

      <div id="searchResults" class="profiles-grid"></div>
      <div id="searchEmpty" class="empty hidden">No results found.</div>
    </section>

    <section id="sessionsSection" class="hidden">
      <h2>Upcoming Sessions</h2>
      <div id="sessionList" class="empty">Loading...</div>
    </section>

    <section id="chatSection" class="hidden">
      <h2>Chat üí¨</h2>
      <div class="chat-container">
        
        <div class="chat-list" id="chatContacts"> 
          <div class="empty" style="padding: 15px; border:none;">Loading contacts...</div>
        </div>
        
        <div class="chat-window">
          
          <div class="chat-header" id="chatHeaderName">Select a contact to start chatting</div>
          
          <div class="messages" id="chatMessages">
             <div id="chatEmpty" class="empty" style="border:none">Select a contact to start chatting.</div>
          </div>
          
          <div class="chat-input">
             <input id="messageInput" type="text" placeholder="Type your message..." disabled>
             <div class="chat-actions">
                <button class="btn secondary" id="fileUploadBtn" disabled title="Upload File/Link">üìé</button>
                <button class="btn" id="sendMessageBtn" disabled>Send</button>
             </div>
          </div>
        </div>
      </div>
    </section>

<section id="profileSection" class="hidden">
      <h2>Student Profile</h2>

      <div class="profile-card">
        <p style="margin-bottom: 15px;"><strong>Email:</strong> <span id="profileEmail">‚Äî</span></p>

        <label>Name:</label>
        <input id="profileNameInput" type="text">

        <label>Academic Year:</label>
        <select id="profileYearInput">
          <option value="">Select year</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>

        <label>Department:</label>
        <input id="profileDepartmentInput" type="text">

        <label>Course:</label>
        <input id="profileCourseInput" type="text">

        <label>Profile Picture URL:</label>
        <input id="profilePictureInput" type="text">

        <button id="saveProfileBtn" class="btn">Save Profile</button>
        
        <button id="resetPasswordBtn" class="btn danger" style="margin-top: 10px;">Reset Password (via Email)</button>
        
      </div>
    </section>



    <section id="supportSection" class="hidden">
      <h2>Report an Issue</h2>
      <div class="profile-card">
        <label>Title:</label>
        <input id="supportTitle" type="text" placeholder="Short summary of the issue">
        <label>Full Description:</label>
        <textarea id="supportMessage" rows="5" placeholder="Explain your issue in detail..."></textarea> 
         <label>Priority:</label>
          <select id="supportPriority">
              <option value="normal">Normal</option>
              <option value="urgent">Urgent</option>
          </select>
  
        <button id="sendSupportBtn" class="btn">Send Report</button>
      </div>
    </section>

    <section id="notificationsSection" class="hidden">
      <h2>Notifications</h2>
      <div id="notificationsList" class="empty">Loading...</div>
    </section>

    <section id="pendingSection" class="hidden">
      <h2>Pending Requests</h2>
      <div id="pendingList" class="empty">Loading pending requests...</div>
      <div id="pendingEmpty" class="empty hidden">No pending requests.</div>
    </section>

    <section id="ratingsSection" class="hidden">
      <h2>Ratings & Feedback</h2>
    
      <div class="search-row">
        <input id="ratingsSearch" placeholder="Search tutors/counsellors by name, module... " style="flex:1">
        <select id="ratingsFilterRole">
          <option value="">All</option>
          <option value="tutor">Tutor</option>
          <option value="counsellor">Counsellor</option>
        </select>
        <button class="btn" id="ratingsSearchBtn">Search</button>
      </div>
    
      <div id="ratingsList" class="empty">Loading your ratings...</div>
      <div id="ratingsEmpty" class="empty hidden">You have not submitted any ratings yet.</div>
    
    </section>


  
    
  </main>
</div>

<script>
  // Helper to show current time on the header
  setInterval(() => {
    document.getElementById("currentTime").textContent = new Date().toLocaleString();
  }, 1000);
</script>

<script type="module" src="student-portal.js"></script>
</body>
</html>




